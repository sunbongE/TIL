# Stack과Heap





## Stack과 Heap 차이



- **Stack** 
  - 함수 호출과 지역 변수를 저장하는데 사용되며, **고정 크기**를 가지고 있습니다. 
  - 구조 : Last In First Out 나중에 들어간게 처음으로 나오는 구조 
  - 문제 : Stack 오버플로우를 유발



- **Heap**
  - **동적으로 할당되는 메모리**를 사용
  -  개발자가 직접 메모리를 할당하고 해제할 수 있습니다.
    - 문제: **메모리 단편화**(Memory Fragmentation)으로 메모리 누수가 발생
  - 메모리를 관리해야한다.



## Stack Overflow  

- 스택오버플로우(Stack Overflow)

 프로그램에서 스택(Stack) 메모리 공간을 넘어서 데이터를 저장하려고 할 때 발생하는 오류를 말합니다. 
스택은 함수 호출 시 지역 변수와 매개변수, 리턴 값 등을 저장하는 데 사용되는 메모리 영역입니다. 
(스택오버플로우는 일반적으로 재귀 호출 함수에서 많이 발생한다.)



## **메모리 단편화**(Memory Fragmentation) 

메모리 단편화는 **내부 단편화**와 **외부 단편화**로 나눌 수 있다.



- 내부 단편화 

메모리가 할당할 때 프로세스가 필요한 양보다 더 큰 메모리를 할당해서 공간이 낭비되는 것을 뜻한다.

![image-20230327151407725](Stack%EA%B3%BCHeap.assets/image-20230327151407725.png)

-  외부 단편화

메모리를 관리하면서 할당, 해제를 하다보면 중간에 남는 공간이 생기는데 이것이 여기저기 생겨서 
총 메모리 공간으로 보면 할당할 수 있는데, 연속된 메모리 공간이 작아 메모리를 할당할 수 없는 문제이다. 

![image-20230327145023301](Stack%EA%B3%BCHeap.assets/image-20230327145023301.png)

위 그림처럼 남은 총 공간은 5mb인데 연속적이지 않아서 할당을 못하는 경우 외부 단편화가 발생하는 현상

이 문제를 해결하기 위해서 **페이징 기법**을 사용한다.

