# 로그아웃

- logout(request)
- 요청 유저에 대한 세션 정보를 삭제함
  - DB에서 session data 삭제
  - 클라의 쿠키에서 session id삭제
- HttpRequest 객체를 인자로 받고 반환 값이 없음
- 사용자가 로그인하지 않은 경우 오류를 발생하지 않음

```python
# views.py
from django.contrib.auth import logout as auth_logout 
# logout 변수명 중복되지 않게 하려고 as이용
def logout(request):
    auth_logout(request)
    return redirect('app_name:index')
```



## Limiting access to logged-in users

- 로그인 사용자에 대한 접근 제한하기

방법 1

is_authenticated attribute 이용한 조건문

**is_authenticated**

- User model의 속성 중 하나
- 사용자가 인증 되었는지 여부를 알 수 있는 방법
- 모든 User 인스턴스에 대해 항상 True인 읽기 전용 속성
  - AnonymousUser는 항상 False
- 일반적으로 request.user에서 이 속성을 사용 (request.user.is_authenticated)
- 권한과는 관련이 없으며, 사용자가 활성화 상태거나 유효한 세션을 가지고 있는지도 확인하지 않음



방법 2 

The login_required decorator 이용한 view 제한

**login_required decorator** 

URL :  /accounts/login/?next=/articles/create/    ->  **method = GET, name = next 형식으로 요청**



- 사용자가 로그인 되어 있으면 정상적으로 view 함수를 실행
- 로그인 하지 않은 사용자의 경우 settings.py의 LOGIN_URL문자열 주소로 redirect

```python
from django.contrib.auth.decorators import login_required
# 로그인 상태에서만 이용할 수 있게 설정한 것
@login_required
def login(request):
    #값 받는 법
    return redirct(request.GET.get('next') or 'app_name:index')
# request.GET.get('next') True라면 articles/update/ 으로 이동 아니면 index페이지 이동
    pass
```



"next" 주의 사항

만약 login 템플릿에서 form action이 작성되어 있다면 동작하지 않음

해당 action 주소 next 파라미터가 작성 되어있는 현재 url이 아닌 /accounts/login/ 으로 요청이 가기 때문