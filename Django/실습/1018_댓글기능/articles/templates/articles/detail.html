{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% block content %}
  <div class='p-5 ' style='border: 1px solid ; radius: 5px;'>

    <h1 class=' mb-4 text-center'>{{article.title}}</h1>

    <h3 class='float-end'>작성자</h3>
    <br>
    <p class='mt-5 my-0'>{{ article.content }}</p>

  </div>
  <div class='d-flex justify-content-end my-3'>
    <a class='btn btn-success mx-3' href="{% url 'articles:update' article.pk %}">수정</a>
    <a class='btn btn-danger' href="{% url 'articles:delete' article.pk %}">삭제</a>
  </div>

  <div class='mt-3 p-3' style='border: 1px solid ; radius: 5px;'>
    {% comment %} 댓글 {% endcomment %}
    <h4 class=''>댓글 목록</h4>
    {% if comments %}
      <p class='text-muted'>
        {{ comments.count }}개
      </p>
    {% endif %}

    <form action="{% url 'articles:comment_create' article.pk %}" method="POST">
      {% csrf_token %}
      {% bootstrap_form comment_form layout='inline'%}
      <div class='d-flex justify-content-end'>
        <input type="submit" value='글 작성' class='btn btn-success my-1'>
      </div>
    </form>

    <hr>
    {% for comment in comments %}
      <div class='d-flex'>
        <span class='me-auto'>{{ comment.content }}</span>
        <a href="{% url 'articles:comment_delete' article.pk comment.pk %}" class='btn btn-danger'>삭제</a>
      </div>
      <hr>
      <br>

      {%empty%}
      <p>댓글이 없어요 ㅠ_ㅠ</p>
    {% endfor %}
  </div>
{% endblock content %}
